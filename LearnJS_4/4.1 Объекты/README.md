# Объекты

<h2>Объекты</h2>

- [ ] Объекты используются для хранения коллекций различных значений и более сложных сущностей. В отличии от `примитивов`, которые хранят только одно значение.

  + `Пустой объект` можно создать, используя один из двух вариантов синтаксиса:
     
  ```javascript
    let user = new Object(); // синтаксис "конструктор объекта"
    let user = {};  // синтаксис "литерал объекта" - самое распространённое
  ```

<hr>
<br>
<br>

<h2>Литералы и свойства</h2>

- [ ] При использовании `литерального синтаксиса {...}` мы сразу можем поместить в объект несколько свойств в виде пар `«ключ: значение»`:
   
```javascript
  let user = {     // объект
    name: "John",  // под ключом "name" хранится значение "John"
    age: 30        // под ключом "age" хранится значение 30
  };

/*
У каждого свойства есть ключ (также называемый «имя» или «идентификатор»).
После имени свойства следует двоеточие ":", и затем указывается значение свойства.
Если в объекте несколько свойств, то они перечисляются через запятую. 

В объекте user сейчас находятся два свойства:

  1) Первое свойство с именем "name" и значением "John".
  2) Второе свойство с именем "age" и значением 30.
*/
```

<br>

- [ ] Мы можем в любой момент добавить в него новые папки, удалить папки или прочитать содержимое любой папки.
- [ ] Для обращения к свойствам используется запись «через точку»:

```javascript
  // получаем свойства объекта:
  console.log( user.name ); // John
  console.log( user.age ); // 30
```

<br>

- [ ] Значение может быть любого типа. Нпирмер можно добавить логическое значение.

```javascript
  user.isAdmin = true;

  console.log(user)
// и будет получена объект - { name: 'John', age: 15, isAdmin: true }
```

<br>

- [ ] Для удаления свойства мы можем использовать оператор `delete`:

```javascript
  delete user.age;

  console.log(user);
// получим объект без св-во age - { name: 'John', isAdmin: true }
```

<br>

- [ ] Имя свойства может состоять из нескольких слов, но тогда оно должно быть заключено в кавычки:

```javascript
  let user = {
    name: "John",
    age: 30,
    "likes birds": true  // имя свойства из нескольких слов должно быть в кавычках
  };
```

<br>
<br>

===================

![](https://github.com/acidshotgun/learn-js-vanilla/blob/master/LearnJS_4/4.1%20%D0%9E%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B/img/obj1.jpg)

<hr>
<br>
<br>

<h2>Квадратные скобки</h2>

- [ ] Для свойств, имена которых состоят из нескольких слов, доступ к значению «через точку» не работает:

```javascript
  // это вызовет синтаксическую ошибку
  user.likes birds = true

  /* JavaScript видит, что мы обращаемся к свойству user.likes, а затем идёт непонятное слово birds.
В итоге синтаксическая ошибка.
Точка требует, чтобы ключ был именован по правилам именования переменных.
То есть не имел пробелов, не начинался с цифры и не содержал специальные символы, кроме $ и _.
*/
```

  + Для таких случаев существует альтернативный способ доступа к свойствам через `квадратные скобки`. Такой способ сработает с `любым именем свойства`:

    ```javascript
      const obj = {
      "test test": true,
      };
  
      // Присвоение значения св-ву
      obj.name = "sasha";
      obj["fav song"] = "бритни спирс";
      // Удаление зн-я св-ва
      delete obj["test test"];
  
      // Получение зн-й
      console.log(obj);
      console.log(obj["fav song"]);
  
      // ПРИМ. св-ва можно получать как через точку, так и кв. скобки
      // Важно лишь заключить св-во в кавычки
      console.log(obj["name"]); // - "sasha"
      console.log(obj.name); // - "sasha"

    ```

  <br>

  <h3>Вычисляемые свойства</h3>

  + Мы можем использовать квадратные скобки в литеральной нотации для создания вычисляемого свойства.

  ```javascript
    let fruit = prompt("Какой фрукт купить?", "apple");

    let bag = {
      [fruit]: 5, // имя свойства будет взято из переменной fruit
    };
    
    alert( bag.apple ); // 5, если fruit="apple"

  // запись [fruit] означает, что имя свойства необходимо взять из переменной fruit.

  // Или

  let fruit = prompt("Какой фрукт купить?", "apple");
  let bag = {};
  
  // имя свойства будет взято из переменной fruit
  bag[fruit] = 5;
  ```

  + Мы можем использовать и более сложные выражения в квадратных скобках:

  ```javascript
    let fruit = 'apple';
    let bag = {
      [fruit + 'Computers']: 5 // bag.appleComputers = 5
    };
  ```

+ Квадратные скобки дают намного больше возможностей, чем запись через точку. Они позволяют использовать любые имена свойств и переменные, хотя и требуют более громоздких конструкций кода.

+ Подведём итог: в большинстве случаев, когда имена свойств известны и просты, используется запись через точку. Если же нам нужно что-то более сложное, то мы используем квадратные скобки.

<hr>
<br>
<br>

<h2>Свойство из переменной</h2>

- [ ] В реальном коде часто нам необходимо использовать существующие переменные как значения для свойств с тем же именем. Например:

```javascript
  function makeUser(name, age) {
    return {
      name: name,
      age: age
      // ...другие свойства
    };
  }
  
  let user = makeUser("John", 30);
  console.log(user.name); // John

// Запись свойств можно упростить
  function makeUser(name, age) {
    return {
      name, // то же самое, что и name: name
      age   // то же самое, что и age: age
      // ...
    };

// И даже перемешивать
  let user = {
    name,  // тоже самое, что и name:name
    age: 30
  };
```

<hr>
<br>
<br>

<h2>Ограничения на имена свойств</h2>

- [ ] Ограничений в в имени свойств по сути нет => они в любом случае будут преобразованы в строку.
- [ ] Например если задать имя `0`, то это станет строкой `"0"`
- [ ] Исключение - это св-во `__proto__`, но о нём позже.

```javascript
  let obj = {
    0: "Тест" // то же самое что и "0": "Тест"
  };
  
  // обе функции выведут одно и то же свойство (число 0 преобразуется в строку "0")
  console.log( obj["0"] ); // Тест
  console.log( obj[0] ); // Тест (то же свойство)
```

<hr>
<br>
<br>

<h2>Проверка существования свойства, оператор «in»</h2>

- [ ] В отличие от многих других языков, особенность JavaScript-объектов в том, что можно получить доступ к любому свойству. Даже если свойства не существует – ошибки не будет!

- [ ] При обращении к свойству, которого нет, возвращается undefined. Это позволяет просто проверить существование свойства:

```javascript
  let user = {};

  console.log( user.noSuchProperty === undefined ); // true означает "свойства нет"
```

<br>

- [ ] Также существует специальный оператор `"in"` для проверки существования свойства в объекте.

```javascript
  "key" in object
```

```javascript
  let user = { name: "John", age: 30 };

  console.log( "age" in user ); // true, user.age существует
  console.log( "blabla" in user ); // false, user.blabla не существует

  // Обратите внимание, что слева от оператора in должно быть имя свойства. Обычно это строка в кавычках.
```

<br>

- [ ] Для чего вообще нужен оператор `in`? Разве недостаточно сравнения с `undefined`? В большинстве случаев прекрасно сработает сравнение с `undefined`. Но есть особый случай, когда оно не подходит и нужно использовать `"in"`.

- [ ] Это когда свойство существует, но содержит значение `undefined`:

```javascript
  let obj = {
    test: undefined,
  };
  
  console.log(obj.test); //  выведет undefined, значит свойство не существует?
  console.log("test" in obj); // true, свойство существует!

  // obj.test технически существует в объекте. Оператор in сработал правильно.
```

  + Подобные ситуации случаются очень редко, так как `undefined` обычно явно не присваивается. Для `«неизвестных» или «пустых»` свойств мы используем значение `null`.

<hr>
<br>
<br>

<h2>Цикл "for..in"</h2>

- [ ] Для перебора всех свойств объекта используется цикл `for..in`. Этот цикл отличается от изученного ранее цикла `for(;;)`.

```javascript
  for (key in object) {
    // тело цикла выполняется для каждого свойства объекта
  }
```

  + К примеру, давайте выведем все свойства объекта `user`:

    ```javascript
      const obj = {
        name: "Sasha",
        age: 15,
        "fav song": "nirvana",
      };

    // В первом случае выводятся все ключи св-ва
    // Во втором значения св-ва (обязательны кв. скобки)
      for (let key in obj) {
        console.log(key); // name age fav song
        console.log(obj[key]); // Sasha 15 nirvana
      }
    ```

    + Обратите внимание, что все конструкции `«for»` позволяют нам объявлять переменную внутри цикла, как, например, `let key` здесь.

    + Кроме того, мы могли бы использовать другое имя переменной. Например, часто используется вариант `"for (let prop in obj)"`.
   
  <br>

  <h3>Упорядочение свойств объекта</h3>

  - [ ] Cвойства упорядочены особым образом: свойства с целочисленными ключами сортируются по возрастанию, остальные располагаются в порядке создания:
  - [ ] `Целочисленные` - это строка, которая преобразовывается в число и обратно без изменений.
        + "555" - целочисленное зн-е
        + "+555" - нецелочисленное

  ```javascript
    let codes = {
      "49": "Германия",
      "41": "Швейцария",
      "44": "Великобритания",
      // ..,
      "1": "США"
    };
    
    for (let code in codes) {
      console.log(code); // 1, 41, 44, 49
    }

  // ЧТобы решить проблему можно просто добавить "+" к коду, чтобы сделать его нецелочисленным
  // Тогда св-ва будут выведены в порядке создания
  ```
